<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Robobo Monitor</title>
    <meta name="description" content="Muuri is a JavaScript library that creates responsive, sortable, filterable and draggable grid layouts.">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="Niklas Rämö">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/robobo-monitor-grid.css">
  </head>
  <body>
    <section id ="monitor" class="monitor">
      <div class="grid">

        <div class="item" data-id="1">
          <div class="item-content">
            <div class="card">
            <div class="card-left-icon"><img src="img/icon.png"></div>
              <div class="card-title">WHEELS</div>
              <div class="card-icon">R</div>
              <div class ="card-content card-content-expanded">
                <i id="wheel">
                  Right Speed: <span id="wheel-right-speed"></span><br>
                  Right Position: <span id="wheel-right-position"></span>º<br>
                  Left Speed: <span id="wheel-left-speed"></span><br>
                  Left Position: <span id="wheel-left-position"></span>º<br>
                </i>
              </div>
            </div>
          </div>
        </div>

        <div class="item" data-id="2">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">PAN & TILT</div>
            <div class="card-icon">R</div>
            <div class ="card-content card-content-expanded">
              <id id="pan-sensor">Pan: <span id="pan-sensor-value"></span></id>
              </br>
              <id id="tilt-sensor">Tilt: <span id="tilt-sensor-value"></span></id>
            </div>
          </div>
        </div>

        <div class="item" data-id="3">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">CONTROL</div>
            <div class="card-icon">R</div>
            <div class ="card-content card-content-expanded">
              <br>
              Aquí el joystick virtual
              <br><br>
            </div>
          </div>
        </div>

        <div class="item" data-id="4">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">IR SENSORS RAW</div>
            <div class="card-icon">R</div>
            <div class ="card-content">
              <i id = "ir-sensor-raw">
                Front-C: <span id="ir-sensor-raw-front-c"></span><br>
                Front-L: <span id="ir-sensor-raw-front-l"></span><br>
                Front-LL: <span id="ir-sensor-raw-front-ll"></span><br>
                Front-R: <span id="ir-sensor-raw-front-r"></span><br>
                Front-RR: <span id="ir-sensor-raw-front-rr"></span><br>
                Back-C: <span id="ir-sensor-raw-back-c"></span><br>
                Back-L: <span id="ir-sensor-raw-back-l"></span><br>
                Back-R: <span id="ir-sensor-raw-back-r"></span>
              </i>
            </div>
          </div>
        </div>

        <div class="item" data-id="5">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">BATTERY</div>
            <div class="card-icon">R</div>
            <div class ="card-content">
              <id id="rob-batery-sensor">ROB battery: <span id="rob-batery-value" class="battery-normal"></span> %</id>
              </br>
              <id id="obo-batery-sensor">OBO battery: <span id="obo-batery-value" class="battery-normal"></span> %</id>
            </div>
          </div>
        </div>

        <div class="item" data-id="6">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">AUDIO SENSORS</div>
            <div class="card-icon">R</div>
            <div class ="card-content">
              <id id="audio-sensor">
              Music Note: <span id="audio-sensor-music-note"></span><br>
              Claps: <span id="audio-sensor-claps"></span>
              </id>
            </div>
          </div>
        </div>

        <div class="item" data-id="7">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">FACE SENSOR</div>
            <div class="card-icon">R</div>
            <div class ="card-content">
<!--
               <id id="facedist-sensor">Distance (0-100): <span id="facedist-sensor-value"></span> cm</id><br>
-->
               <id id="facedist-sensor">Distance: <span id="facedist-sensor-value"></span></id><br>
               <id id="facepos-sensor">
                 X position: <span id="facepos-sensor-value-x"></span><br>
                 Y position: <span id="facepos-sensor-value-y"></span>
               </id>
            </div>
          </div>
        </div>

        <div class="item" data-id="8">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">BLOB SENSOR</div>
            <div class="card-icon">R</div>
            <div class ="card-content">
              <div class="blob-color-container">
                <div class="blob-color blob-green">
                  <span id="color-sensor-green-size"></span>m<sup>2</sup><br>
                  x,y: <span id="color-sensor-green-x"></span>, <span id="color-sensor-green-y"></span>
                </div>
                <div class="blob-color blob-blue">
                  <span id="color-sensor-blue-size"></span>m<sup>2</sup><br>
                  x,y: <span id="color-sensor-blue-x"></span>, <span id="color-sensor-blue-y"></span>
                </div>
                <div class="blob-color blob-red">
                  <span id="color-sensor-red-size"></span>m<sup>2</sup><br>
                  x,y: <span id="color-sensor-red-x"></span>, <span id="color-sensor-red-y"></span>
                </div>
                <div class="blob-color blob-custom">
                  <span id="color-sensor-custom-size"></span>m<sup>2</sup><br>
                  x,y: <span id="color-sensor-custom-x"></span>, <span id="color-sensor-custom-y"></span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="item" data-id="9">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">ORIENTATION SENSOR</div>
            <div class="card-icon">R</div>
            <div class ="card-content">
              <id id="orientation-sensor">
                Yaw: <span id="orientation-sensor-value-yaw"></span>º<br>
                Pitch: <span id="orientation-sensor-value-pitch"></span>º<br>
                Roll: <span id="orientation-sensor-value-roll"></span>º
              </id>
            </div>
          </div>
        </div>

        <div class="item" data-id="10">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">ACCELERATION SENSOR</div>
            <div class="card-icon">R</div>
            <div class ="card-content">
              <id id="accel-sensor">
                X: <span id="accel-sensor-x"></span> m/s<sup>2</sup> <br>
                Y: <span id="accel-sensor-y"></span> m/s<sup>2</sup><br>
                Z: <span id="accel-sensor-z"></span> m/s<sup>2</sup><br>
              </id>
            </div>
          </div>
        </div>

        <div class="item" data-id="10">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">TOUCH SENSOR</div>
            <div class="card-icon">R</div>
            <div class ="card-content">
              Tap zone: <br>
              <id id="tap-sensor">
                Tap X: <span id="tap-sensor-x-value"></span><br>
                Tap Y: <span id="tap-sensor-y-value"></span>
              </id>
              <br>
              <id id="fling-sensor">Fling angle: <span id="fling-sensor-value"></span> º</id>
            </div>
          </div>
        </div>

        <div class="item" data-id="10">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">ENVIROMENT LIGHT SENSOR</div>
            <div class="card-icon">R</div>
            <div class ="card-content">
              <id id="brightness-sensor">Brightness: <span id="brightness-sensor-value"></span> Lux</id>
            </div>
          </div>
        </div>
      </div>

    </section>

    <script src="lib/vendor/velocity.min.js"></script>
    <script src="lib/vendor/hammer.min.js"></script>
    <script src="lib/vendor/muuri.js"></script>
    <script src="lib/robobo-monitor-grid.js"></script>
    <script src="https://mytechia.github.io/robobo-scratch-extension-develop/remote-library/remotelib-develop.js"></script>
    <script type="text/javascript" src="lib/robobo-monitor.js"></script>

    <script>
        //Lets create a new instance of the Robobo Remote JS Library and connect it to a Robobo

        var params = getAllUrlParams();

        if (params.status != undefined) {
          if (params.status == 'disconnected') {
            document.getElementById('monitor').classList.add('disconnected');
          }
        }else {
          document.getElementById('monitor').classList.remove('disconnected');
        }

        var rem = new Remote(params.ip,"");

        //connect to the remote Robobo
        rem.connect();

        //wait until the connection is stablished
        rem.waitForConnection();

        //register status callbacks
        registerRemoteCallbacks(rem);

        //start polling status values
        setInterval(updateSensors, 100); //10 per second
    </script>

  </body>

</html>
