<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Robobo Monitor</title>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/robobo-monitor-grid.css">
    <link rel="stylesheet" href="css/piano.css">
  </head>
  <body>
    <section id ="monitor" class="monitor">
      <div class="grid">
        <div class="item" data-id="1">
          <div class="item-content">
            <div class="card">
            <div class="card-left-icon"><img src="img/icon.png"></div>
              <div class="card-title">WHEELS</div>
              <div class="card-icon">R</div>
              <div class ="card-content card-content-expanded">
                <i id="wheel"></i>
                <div class="wheel-block-container">
                    <div class="wheel-block">
                      LEFT<br>
                      Speed: <span id="wheel-left-speed"></span><br>
                      Pos: <span id="wheel-left-position"></span>º<br>
                    </div>
                    <div class="wheel-block">
                      RIGHT <br>
                      Speed: <span id="wheel-right-speed"></span><br>
                      Pos: <span id="wheel-right-position"></span>º<br>
                    </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="item" data-id="2">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">PAN & TILT</div>
            <div class="card-icon">R</div>
            <div class ="card-content card-content-expanded">
              Pan, Tilt:
              <id id="pan-sensor"> <span id="pan-sensor-value"></span></id>,
              <id id="tilt-sensor"><span id="tilt-sensor-value"></span></id>
            </div>
          </div>
        </div>

        <div class="item" data-id="3">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">CONTROL</div>
            <div class="card-icon">R</div>
            <div class ="card-content card-content-expanded">
              <br>
              Aquí el joystick virtual
              <br><br>
            </div>
          </div>
        </div>

        <div class="item" data-id="4">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">IR SENSORS RAW</div>
            <div class="card-icon">R</div>
            <div class ="card-content">
              <i id = "ir-sensor-raw">
                <div class="ir-block-container">
                    <div class="ir-block-large">
                      Front-C: <span id="ir-sensor-raw-front-c"></span><br>
                    </div>
                    <div class="ir-block">
                      Front-L: <span id="ir-sensor-raw-front-l"></span><br>
                      Front-LL: <span id="ir-sensor-raw-front-ll"></span><br>
                    </div>
                    <div class="ir-block">
                      Front-R: <span id="ir-sensor-raw-front-r"></span><br>
                      Front-RR: <span id="ir-sensor-raw-front-rr"></span><br>
                    </div>
                    <div class="ir-block-large">
                      Back-C: <span id="ir-sensor-raw-back-c"></span><br>
                    </div>
                    <div class="ir-block">
                      Back-L: <span id="ir-sensor-raw-back-l"></span><br>
                    </div>
                    <div class="ir-block">
                      Back-R: <span id="ir-sensor-raw-back-r"></span>
                    </div>
                </div>
              </i>
            </div>
          </div>
        </div>

        <div class="item" data-id="5">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">BATTERY</div>
            <div class="card-icon">R</div>
            <div class ="card-content">
              <div class="battery-block-container">
                  <div class="battery-block">
                    ROB<br>
                    <div id="rob-battery-icon" class="fa fa-5 battery battery-no-value">&#xf244</div>
                    <span id="rob-battery-value">-</span>%
                  </div>
                  <div class="battery-block">
                    OBO<br>
                    <div class="fa fa-5 battery battery-no-value">&#xf244</div>
                    <span id="obo-battery-value">-</span> %
                  </div>
              </div>
            </div>
          </div>
        </div>

        <div class="item" data-id="6">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">AUDIO SENSORS</div>
            <div class="card-icon">R</div>
            <div class ="card-content">
              <id id="audio-sensor">

              <div class="container">
                    <div id="keyboard">
                        <div id="C" class="key-white key-white-unselected"><span class="music-note">C</span><div id="Cs" class="key-black key-black-unselected"><span class="music-note"></span></div></div>
                        <div id="D" class="key-white key-white-unselected"><span class="music-note">D</span><div id="Ds" class="key-black key-black-unselected"><span></span></div></div>
                        <div id="E" class="key-white key-white-unselected"><span class="music-note">E</span></div>
                        <div id="F" class="key-white key-white-unselected"><span class="music-note">F</span><div id="Fs" class="key-black key-black-unselected"><span></span></div></div>
                        <div id="G" class="key-white key-white-unselected"><span class="music-note">G</span><div id="Gs" class="key-black key-black-unselected"><span></span></div></div>
                        <div id="A" class="key-white key-white-unselected"><span class="music-note">A</span><div id="As" class="key-black key-black-unselected"><span></span></div></div>
                        <div id="B" class="key-white key-white-unselected"><span class="music-note">B</span></div>
                </div>
              </div>

              <!-- Music Note: <span id="audio-sensor-music-note"></span><br>-->
              &nbsp;&nbsp;&nbsp;Claps: <span id="audio-sensor-claps"></span>

              </id>
            </div>
          </div>
        </div>

        <div class="item" data-id="7">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">FACE SENSOR</div>
            <div class="card-icon">R</div>
            <div class ="card-content">
<!--
               <id id="facedist-sensor">Distance (0-100): <span id="facedist-sensor-value"></span> cm</id><br>
-->
               <id id="facedist-sensor">Distance: <span id="facedist-sensor-value"></span></id><br>
               <id id="facepos-sensor">
                 Position (x,y): <span id="facepos-sensor-value-x"></span>, <span id="facepos-sensor-value-y"></span>
               </id>
            </div>
          </div>
        </div>

        <div class="item" data-id="8">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">BLOB SENSOR</div>
            <div class="card-icon">R</div>
            <div class ="card-content">
              <div class="blob-color-container">
                <div class="blob-color blob-green">
                  <span id="color-sensor-green-size"></span> m<sup>2</sup><br>
                  x,y: <span id="color-sensor-green-x"></span>, <span id="color-sensor-green-y"></span>
                </div>
                <div class="blob-color blob-blue">
                  <span id="color-sensor-blue-size"></span> m<sup>2</sup><br>
                  x,y: <span id="color-sensor-blue-x"></span>, <span id="color-sensor-blue-y"></span>
                </div>
                <div class="blob-color blob-red">
                  <span id="color-sensor-red-size"></span> m<sup>2</sup><br>
                  x,y: <span id="color-sensor-red-x"></span>, <span id="color-sensor-red-y"></span>
                </div>
                <div class="blob-color blob-custom">
                  <span id="color-sensor-custom-size"></span> m<sup>2</sup><br>
                  x,y: <span id="color-sensor-custom-x"></span>, <span id="color-sensor-custom-y"></span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="item" data-id="9">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">ORIENTATION SENSOR</div>
            <div class="card-icon">R</div>
            <div class ="card-content">
              <id id="orientation-sensor">
                Yaw, Pitch, Roll: <span id="orientation-sensor-value">
              </id>
            </div>
          </div>
        </div>

        <div class="item" data-id="10">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">ACCELERATION SENSOR</div>
            <div class="card-icon">R</div>
            <div class ="card-content">
              <id id="accel-sensor">
                x,y,z:
                <span id="accel-sensor-x"></span> m/s<sup>2</sup>,
                <span id="accel-sensor-y"></span>m/s<sup>2</sup>,
                <span id="accel-sensor-z"></span>m/s<sup>2</sup>
              </id>
            </div>
          </div>
        </div>

        <div class="item" data-id="10">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">TOUCH SENSOR</div>
            <div class="card-icon">R</div>
            <div class ="card-content">
              <id id="tap-sensor">
                  Tap x,y: <span id="tap-sensor-value"></span>
                  - Tap zone:
              </id>
              <br>
              <id id="fling-sensor">Fling angle: <span id="fling-sensor-value"></span> º</id>
            </div>
          </div>
        </div>

        <div class="item" data-id="10">
          <div class="item-content">
            <div class="card-left-icon"><img src="img/icon.png"></div>
            <div class="card-title">ENVIROMENT LIGHT SENSOR</div>
            <div class="card-icon">R</div>
            <div class ="card-content">
              <id id="brightness-sensor">Brightness: <span id="brightness-sensor-value"> - </span> Lux</id>
            </div>
          </div>
        </div>
      </div>

    </section>

    <script src="lib/vendor/velocity.min.js"></script>
    <script src="lib/vendor/hammer.min.js"></script>
    <script src="lib/vendor/muuri.js"></script>
    <script src="lib/robobo-monitor-grid.js"></script>
    <script src="https://mytechia.github.io/robobo-scratch-extension-develop/remote-library/remotelib-develop.js"></script>
    <script type="text/javascript" src="lib/robobo-monitor.js"></script>

    <script>
        //Lets create a new instance of the Robobo Remote JS Library and connect it to a Robobo

        var params = getAllUrlParams();

        if (params.status != undefined) {
          if (params.status == 'disconnected') {
            document.getElementById('monitor').classList.add('disconnected');
          }
        }else {
          document.getElementById('monitor').classList.remove('disconnected');
        }

        var rem = new Remote(params.ip,"");

        //connect to the remote Robobo
        rem.connect();

        //wait until the connection is stablished
        rem.waitForConnection();

        //register status callbacks
        registerRemoteCallbacks(rem);

        //start polling status values
        setInterval(updateSensors, 100); //10 per second
    </script>

  </body>

</html>
